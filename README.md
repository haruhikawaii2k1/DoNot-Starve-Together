[Hướng dẫn sử dụng BOT Discord Thông Báo DST](https://discord.gg/m5f6v2NB8W)

# Hướng dẫn tạo Server Dedicated 
Với Script này sẽ hỗ trợ bạn cài đặt Mod, chạy Server chỉ bằng vài cú Click chuột, hỗ trợ chạy lại Server khi bị Crash, hỗ trợ SteamCMD, các bước thực hiện bạn đọc tiếp hướng dẫn nhé!

**Mục Lục:**
1. [Cài đặt Don't Starve Together Dedicated Server](#1-cài-đặt-dont-starve-together-dedicated-server)
2. [Tải Script và các bước thiết lập](#2-tải-script-và-các-bước-thiết-lập)
3. [Chạy Server Dedicated](#3-chạy-server-dedicated)
4. [Các chức năng của Script](#4-các-chức-năng-của-script)
5. 💡 [Q&A](#5--qa)

## 1. Cài đặt Don't Starve Together Dedicated Server
- Vào `Thư Viện` trong Steam
- Kích hoạt bộ lọc `Công Cụ`

  ![1  thư viện](https://user-images.githubusercontent.com/57210639/132952897-fd9231a9-e97b-42d1-99f4-7ea74a72743b.png)
- Tìm kiếm `Don't Starve Together Dedicated Server` và Cài Đặt
  ![2  thư viện](https://user-images.githubusercontent.com/57210639/132952972-43e61c51-196f-4671-8de6-84586cf5cca8.png)

## 2. Tải Script và các bước thiết lập
- Tải Script hỗ trợ tạo Server Dedicated: [tại đây](https://drive.google.com/u/2/uc?id=1RX-tXiFD0J1NAIkMlqxNVvf9jRtfOZyt&export=download)

  ![image](https://user-images.githubusercontent.com/57210639/132953344-ef75dd0a-8660-413e-9a8a-13f2a6888a05.png)
- Đặt Script ngoài màn hình chính (Desktop) đễ tiện sử dụng
### Mở Script lên và thực hiện thực hiện theo các bước
1. Chọn thư mục `steamapps` nơi cài đặt `Don't Starve Together Dedicated Server` 
  
   ![11](https://user-images.githubusercontent.com/57210639/132953557-f6bdf21f-f1ae-4c61-8801-308d0af5cc5e.png)
  
   Nếu bạn không biết mình đã cài đặt `Don't Starve Together Dedicated Server` ở đâu thì làm như sau:
   - Truy cập vào Thư Viện Steam như ở [Bước 1](#1-cài-đặt-dont-starve-together-dedicated-server)
   - Chọn vào biểu tượng Bánh Răng → Quản lý → Mở thư mục trên máy
     ![3](https://user-images.githubusercontent.com/57210639/132953651-56e05dfc-08d0-4336-800e-ce284cb8be98.png)
   - Tại đây sẽ xác định được đường dẫn thư mục `steamapps`

     ![4](https://user-images.githubusercontent.com/57210639/132953655-9e9b1597-f3ff-4e56-973c-b54a0644ebd9.png)
   
2. Chọn thư mục chứa World đã tạo

   ![12](https://user-images.githubusercontent.com/57210639/132953788-53b7cc27-09f3-4a79-9fbf-3043e067d155.png)
   
   Nếu bạn không biết đường dẫn thư mục chứa World của mình ở đâu thì làm như sau:
   - Trong Game, tại mục tạo World → chọn vào icon 📂
     ![5](https://user-images.githubusercontent.com/57210639/132954223-5d22be01-8dc7-49ce-a2fe-b329240e1b39.png)
   - Tại đây sẽ xác định được đường dẫn thư mục chứa World bạn cần

     ![6](https://user-images.githubusercontent.com/57210639/132954252-c9b4ff41-61b5-46d4-ae2b-c95ee39749cd.png)
    
3. Nhập `token` Server
   
   ![13](https://user-images.githubusercontent.com/57210639/132954347-a5abde3d-fc53-4fb8-87be-3cace9c89f2c.png)
  
   Cách lấy mã `token`
   - Truy cập liên kết: [Klei Account](https://accounts.klei.com/account/game/servers?game=DontStarveTogether)
   - Đăng nhập bằng tài khoản Steam
   - Nếu như lần đầu bạn đăng nhập, hãy điền thông tin theo yêu cầu vào form và xác nhận
   - Phía trên cùng chọn vào `Trò Chơi` → `Máy Chủ Don't Starve Together`
     ![8](https://user-images.githubusercontent.com/57210639/132954782-a1d6cf1c-eee1-4756-b02d-d78411354dd1.png)
   - Tại `Tên cụm`, bạn có thể đặt tên tuỳ ý và chọn `Thêm mới máy chủ`
     ![9](https://user-images.githubusercontent.com/57210639/132954834-d797db32-731e-4878-87ab-9e96f24f3ede.png)
   - Copy `token` và dán vào Script
     ![10](https://user-images.githubusercontent.com/57210639/132954856-f9c06116-c65f-483a-9315-190538ca32ae.png)

4. Lựa chọn phiên bản mà bạn muốn Server chạy

   Chọn `Yes` để dùng phiên bản 64bit hoặc chọn `No` để dùng phiên bản 32bit
   
   ![14](https://user-images.githubusercontent.com/57210639/132955090-d0a4a6c7-e58b-4481-8312-a5e5c7fd4917.png)

5. Giao diện chính của Script, hoàn thành các bước thiết lập
   
   ![15](https://user-images.githubusercontent.com/57210639/132955127-62acf94c-4216-45be-838c-ea238f3176e3.png)

## 3. Chạy Server Dedicated
Sau khi hoàn thành xong các bước thiết lập, về sau khi mở Script sẽ hiển thị giao diện chính

![15](https://user-images.githubusercontent.com/57210639/132955127-62acf94c-4216-45be-838c-ea238f3176e3.png)

### Tại giao diện chính, nhập 1 và Enter để chạy Server
Sẽ có 4 cửa sổ hiện lên (nếu World có Cave) bao gồm: 2 cửa sổ host chính Master và Cave và kèm theo 2 cửa sổ `Lock` tương ứng
![16](https://user-images.githubusercontent.com/57210639/132955436-d11feee0-8faf-4ccb-9137-f4fff5572d10.png)
Đến đây là đã host Server Dedicated thành công, vào game và tìm tên World của mình và chiến thôi!
![17](https://user-images.githubusercontent.com/57210639/132955440-78a41eaf-17a0-47d4-a918-b0d7f25a7d2c.png)
### Cách tắt Server
Script có hỗ trợ chạy lại World khi bị xung đột và tắt đột ngột (Crash)
Vì vậy hãy tắt các cửa sổ Lock trước và đến các cửa sổ còn lại
## 4. Các chức năng của Script
### - Hỗ trợ chạy lại World khi bị Crash  
### - Hỗ trợ [SteamCMD](https://developer.valvesoftware.com/wiki/SteamCMD#Windows)
- Sau khi cài đặt SteamCMD
- Tại bước chọn thư mục `steamapps`, nếu bạn chưa cài đặt `Don't Starve Together Dedicated Server` Script sẽ hỗ trợ bạn cài đặt!
- Khi chạy Server, sẽ có thêm bước kiểm tra cập nhật `Don't Starve Together Dedicated Server`
### - Các thiết lập về World
1. Chạy Server
2. Thay đổi mật khẩu
3. Thay đổi số người chơi
4. Bật/Tắt chế độ PvP
5. Thêm/Xoá Admin
### - Các Thiết lập về Script
6. Thay đổi World
7. Thay đổi Token
8. Cài đặt Script
   1. Chuyển đổi chế độ 32bit/64bit
   2. Chuyển đổi chế độ cài đặt Mod
      - Download (mặc định): đọc các Mod từ World của bạn và ghi vào file `dedicated_server_mods_setup.lua` của `Don't Starve Together Dedicated Server`, khi chạy Server sẽ tự động Download Mod.
      - Copy: đọc các Mod từ World của bạn và Copy Mod từ `Don't Starve Together` sang `Don't Starve Together Dedicated Server`
   
      Sử dụng chế độ Copy khi chế độ Download không hoạt động đúng
      
      Chế độ Copy chỉ hỗ trợ khi `Don't Starve Together` và `Don't Starve Together Dedicated Server` cài đặt cùng 1 nơi, tức là cùng thư mục `steamapps`
   9. Khôi phục lại Script về trạng thái ban đầu 
## 5. 💡 Q&A
1. Làm thế nào để Thêm/Bớt MOD ?
   - Trong Game, tại mục tạo World
   - Thêm/Bớt MOD tuỳ ý
   - Chạy World → Huỷ -> Quay lại -> Lưu thay đổi
     ![18](https://user-images.githubusercontent.com/57210639/132956783-0291cba7-9fe9-4c29-a603-19cba228822e.png)
     ![19](https://user-images.githubusercontent.com/57210639/132956787-ea94520b-3193-493e-b97d-6c652b10ee47.png)
   - Như vậy là đã Thêm/Bớt MOD thành công, mở Script và chạy Server thôi!
2. Không thể tìm thấy Server ?
   - Hãy vào Steam và check update Don't Starve Togerther Dedicated Server
3. Treo máy 1 giời gian, Server tự động tắt ?
   Khi máy tính của bạn không hoạt động trong 1 thời gian thì sẽ tự động chuyển vào chế độ ngủ, cách khắc phục như sau:
   - Nhấn tổ hợp phím: Windows + R
   - Nhập `powercfg.cpl` vào hộp thoại Run
   - Cửa sổ **🔋Power Options** hiện ra, phía bên trải cửa sổ chọn **🌘 Change when the computer sleeps**
   - Tại mục **🌘 Put the computer to sleep** chỉnh tất cả thành **Nerver** → **Save changes** là xong
4. Làm thế nào để host nhiều World trên 1 máy ?
   - Hãy đảm bảo rằng `server_port` tại các World là khác nhau
     - Tại thư mục Master và Cave đều có file `server.ini`
     - Mở file `server.ini` trong thư mục Master và Cave của các World
     - Tại phần [NETWORK] 
     - Sửa số cổng tại `server_port = ` sao cho không trùng nhau là được 
     - Ví dụ: Cluster_1 thì mình sửa ở Master là 10889, Caves là 10890. Cluster_2: Master là 10891, Caves là 10892
   - Khởi chạy 1 World 
   - Mở lại Script
   - Chọn 6 để đổi World và chạy Server thôi!
